# 访问管理
## 概念
**这里用户可以管理用户和策略**

## 用户管理

### 用户

#### 新建用户

1. 登录TKEStack。
2. 切换至【平台管理】控制台，选择【访问管理】->【用户管理】。
3. 点击【新建】按钮。如下图所示： ![新建用户](../../../../images/新建用户.png)
4. 在弹出的添加用户窗口填写用户信息。如下图所示： ![添加用户](../../../../images/添加用户.png)
   - **用户账号：** 长度3～32位字符，小写字母或数字开头结尾，中间包含小写字母、数字、-
   - **用户名称：** 长度需小于256字符，用户名称会显示在页面右上角
   - **用户密码：** 10~16位字符，需包括大小写字母及数字
   - **确认密码：** 再次输入密码。
   - **手机号：** 输入用户手机号
   - **邮箱：** 输入用户邮箱
   - **平台角色：**
     - **管理员：** 平台预设角色，允许访问和管理所有平台和业务的功能和资源
     - **平台用户：** 平台预设角色，允许访问和管理大部分平台功能，可以新建集群及业务
     - **租户：** 平台预设角色，不绑定任何平台权限，仅能登录
     - **自定义：**  通过勾选下面的策略给用户自定义独立的权限
5. 单击【保存】按钮。

#### 修改密码

1. 登录TKEStack。

2. 切换至【平台管理】控制台，选择【访问管理】->【用户管理】，查看用户列表。

3. 点击用户列表最右侧的【修改密码】按钮。如下图所示： ![修改密码按钮](../../../../images/修改密码按钮.png) 

   > 注意：此页面也可以通过【修改密码】旁边的【删除】来删除用户

4. 在弹出的修改密码窗口里输入新的密码并确认。如下图所示： ![修改密码](../../../../images/修改密码.png) 

5. 单击【保存】按钮。

#### 编辑用户基本信息

1. 登录TKEStack
2. 切换至【平台管理】控制台，选择【访问管理】->【用户管理】，查看用户列表。
3. 点击列表中的用户名称。如下图所示： ![用户列表](../../../../images/用户列表.png) 
4. 在用户基本信息页面，单击 基本信息 旁的【编辑】按钮。如下图所示： ![编辑用户按钮](../../../../images/编辑用户按钮.png) 
5. 在弹出的用户信息框内编辑用户信息。
6. 单击【保存】按钮。

### 用户组
#### 新建用户组
  1. 登录TKEStack
  2. 切换至【平台管理】控制台，选择【访问管理】->【用户管理】-> 【用户组】。
  3. 点击【新建】按钮。如下图所示：
      ![新建用户组](../../../../images/新建用户组.png)
  4. 在弹出的添加用户窗口填写用户信息。如下图所示：
      ![添加用户组](../../../../images/添加用户组.png)
      + **用户组名称：** 长度需小于60位字符，小写字母或数字开头结尾，中间包含小写字母、数字、-
      + **用户组描述：** 长度需小于255字符
      + **关联用户：** 点按用户ID/名称前面的方框可以关联相应的用户，支持全选和按住shift键多选
      + **平台角色：** 
        + **管理员：** 平台预设角色，允许访问和管理所有平台和业务的功能和资源
        + **平台用户：** 平台预设角色，允许访问和管理大部分平台功能，可以新建集群及业务
        + **租户：** 平台预设角色，不绑定任何平台权限，仅能登录
        + **自定义：**  通过勾选下面的策略给用户自定义独立的权限
  5. 单击【提交】按钮。
#### 编辑用户组基本信息
  1. 登录TKEStack
  2. 切换至【平台管理】控制台，选择【访问管理】->【用户组管理】，查看用户组列表。
  3. 点击列表中的用户组名称。如下图1所示：
      ![用户组列表](../../../../images/用户组列表.png) 
> 此界面也可以更改关联用户，如上图中的2所示，和 新建用户组 ->添加用户组 中一样的步骤来关联用户。

4. 在用户组基本信息页面，单击 基本信息 旁的【编辑】按钮。如下图1所示：
   ![编辑用户组按钮](../../../../images/编辑用户组按钮.png) 

5. 在弹出的信息框内可以编辑 用户组名称 和 用户组描述，此时会出现【提交】按钮，点击后可更改用户组基本信息。

   > 如上图中的2所示，此界面也可以更改关联用户，点击蓝色【关联用户】按钮后，和 新建用户组 ->添加用户组 中一样的操作来关联用户。这里还可以点击查看【已关联角色】和【已关联策略】

#### 删除用户组
  1. 登录TKEStack
  2. 切换至【平台管理】控制台，选择【访问管理】->【用户组管理】，查看用户组列表。
  3. 点击用户组列表最右侧的【删除】按钮。如下图所示：
      ![删除用户组](../../../../images/删除用户组.png) 
  4. 在弹出的确认删除窗口，单击【确认】。

## 策略管理

### 平台策略

#### 新建策略
  1. 登录TKEStack
  2. 切换至【平台管理】控制台，选择【访问管理】->【策略管理】
  3. 点击【新建】按钮。如下图所示：
      ![新建策略按钮](../../../../images/新建策略按钮.png)
  4. 在弹出的新建策略窗口输入策略信息。如下图所示：
      ![策略窗口](../../../../images/策略窗口.png)
     + **策略名称：** 长度需要小于256个字符
     + **效果：** 策略动作，允许/拒绝
     + **服务：** 选择策略应用于哪项服务
     + **操作：** 选择对应服务的各项操作权限
     + **资源：** 输入资源label，支持模糊匹配，策略将应用于匹配到的资源
     + **描述：** 输入策略描述
  5. 单击【保存】按钮。
#### 关联用户和用户组
  1. 登录TKEStack。

  2. 切换至【平台管理】控制台，选择【访问管理】->【策略管理】，查看策略列表。

  3. 点击列表中最右侧【关联用户】或【关联用户组】按钮。如下图所示：
      ![关联用户、用户组](../../../../images/关联用户用户组.png)
      
      > 此界面也可以点击最右边的【删除】按钮来删除策略
      
  4. 在弹出的关联用户窗口选择用户或用户组，这里以用户组为例。如下图所示：
      ![关联窗口](../../../../images/策略用户组.png)

  5. 单击【确定】按钮

#### 编辑策略基本信息

1. 登录TKEStack
2. 切换至【平台管理】控制台，选择【访问管理】->【策略管理】，查看策略列表。
3. 点击列表中的策略名称。如下图所示： ![用户列表](../../../../images/策略名.png) 
4. 在策略基本信息页面，单击 基本信息 旁的【编辑】按钮。如下图所示： ![编辑用户按钮](../../../../images/编辑策略按钮.png) 
5. 在弹出的信息框内编辑策略名称和描述。
6. 单击【保存】按钮。

### 业务策略

#### 新建策略

    1. 登录TKEStack
    2. 切换至【平台管理】控制台，选择【访问管理】->【策略管理】->【业务策略】
    3. 点击【新建】按钮。如下图所示：
       ![新建策略按钮](../../../../images/新建业务策略按钮.png)
    4. 在弹出的新建策略窗口输入策略信息。如下图所示：
       ![策略窗口](../../../../images/策略窗口.png)
       + **策略名称：** 长度需要小于256个字符
       + **效果：** 策略动作，允许/拒绝
       + **服务：** 选择策略应用于哪项服务
       + **操作：** 选择对应服务的各项操作权限
       + **资源：** 输入资源label，支持模糊匹配，策略将应用于匹配到的资源
       + **描述：** 输入策略描述
    5. 单击【保存】按钮。

#### 编辑策略基本信息

1. 登录TKEStack
2. 切换至【平台管理】控制台，选择【访问管理】->【策略管理】，查看策略列表。
3. 点击列表中的策略名称。如下图所示： ![业务策略名](../../../../images/业务策略名.png) 
4. 在策略基本信息页面，单击 基本信息 旁的【编辑】按钮。如下图所示： ![编辑业务策略按钮](../../../../images/编辑业务策略按钮.png) 
5. 在弹出的信息框内编辑策略名称和描述。
6. 单击【保存】按钮。