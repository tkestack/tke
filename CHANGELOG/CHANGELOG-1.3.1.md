## [1.3.1](https://github.com/tkestack/tke/compare/v1.3.0...v1.3.1) (2020-08-18)


### Bug Fixes

* **addon:** keep checking health when TAPP addon is in failed state ([fd3a89d](https://github.com/tkestack/tke/commit/fd3a89d3f49ccfa5fc5a8e1ad5e5cc2b5e2c64ce))
* **audit:** enable global components audit ([ecf03f1](https://github.com/tkestack/tke/commit/ecf03f132394c127c4393c4027c77c0107c0f36b))
* **audit:** es password decode and es v7 support ([ce92354](https://github.com/tkestack/tke/commit/ce92354429ba402c0784cdc82a5a205322486475))
* **auth:** adapt the domain name for platform policies ([4dd3944](https://github.com/tkestack/tke/commit/4dd3944552aa1ee09885a24cc01a5544b2dc61ad))
* **auth:** change users' own password ([ff84c8a](https://github.com/tkestack/tke/commit/ff84c8af0e2dd8426ec0d6d431f5ca9e359cc3cd))
* **cluster:** kubelet error on missing manifest dir, close [#567](https://github.com/tkestack/tke/issues/567) ([52f0d2a](https://github.com/tkestack/tke/commit/52f0d2a49b7b733cb6873b278695f96eb0dcbec9))
* **cluster:** load br_netfilter if available, close [#538](https://github.com/tkestack/tke/issues/538) ([09f457e](https://github.com/tkestack/tke/commit/09f457e8d86a5176763db41047381348fee731d1))
* **cluster:** missing third party ha ([9a1e8b7](https://github.com/tkestack/tke/commit/9a1e8b7170835cb09a824da10c545a1230a8f9fe))
* **cluster:** query credentials and be compatible with older clusters ([3ba2e87](https://github.com/tkestack/tke/commit/3ba2e873dfb611a3030bebf38e5aac54b6b08811))
* **cluster:** support-authZ-4-global-cluster ([642647c](https://github.com/tkestack/tke/commit/642647ce72833bdac69917af9101e0a62eaa44f6))
* **cluster:** use advertise address when kubeadm join node ([66a6328](https://github.com/tkestack/tke/commit/66a632852c336d56e1d406b520db2b42ddcd02ec))
* **console:** logstash v3 updated ([2ceefc3](https://github.com/tkestack/tke/commit/2ceefc3c28d33f1d86570e5951931f96ca52125b))
* **console:** namespace list for logstash updated ([50f61d2](https://github.com/tkestack/tke/commit/50f61d2cf6c13c97d913835fc414c3fc0b7b9ca0))
* **docs:** fix dead link ([#639](https://github.com/tkestack/tke/issues/639)) ([0cc99ee](https://github.com/tkestack/tke/commit/0cc99ee8a2e7bf267f4e6dec6180955c2d5cb269))
* **go.mod:** replace domain-role-manager with a new address ([448eeaa](https://github.com/tkestack/tke/commit/448eeaa6b81c8cb13d404997755162b25699177d))
* **installer:** add metrics-server configmap ([31d8c35](https://github.com/tkestack/tke/commit/31d8c352cb1879d7e3d5f6d09987c9d19c5e5bad))
* **installer:** add retry logic for installer check ([#622](https://github.com/tkestack/tke/issues/622)) ([6652131](https://github.com/tkestack/tke/commit/66521319122564648c14ee160e11f17a31e773fc))
* **installer:** bad field name ([6e9f8f5](https://github.com/tkestack/tke/commit/6e9f8f52075a67afcc20a6876490e6071ff493cd))
* **installer:** check /var/lib/docker ([40b8506](https://github.com/tkestack/tke/commit/40b850636cfc40f69ed35be90b17279c386caef2))
* **installer:** docker rm failed ([9196206](https://github.com/tkestack/tke/commit/9196206f1c4f82af330dbc2b52233d1e4fe56d71))
* **installer:** missing /var/lib/docker ([d9ab5a1](https://github.com/tkestack/tke/commit/d9ab5a1fafecb3bd1e5b2a05ba4a819f089501b2))
* **installer:** push image error when reuse installer node ([5927006](https://github.com/tkestack/tke/commit/5927006d667369b3021748e1272e4979c84d1baf))
* **installer:** support all in one install ([#628](https://github.com/tkestack/tke/issues/628)) ([84cd4b6](https://github.com/tkestack/tke/commit/84cd4b6d257c55c7ae88065ce1b023ff45173f21))
* **monitor:** solve the problem of checking multiple etcd components ([d9e59f4](https://github.com/tkestack/tke/commit/d9e59f48777d5b2938cf7f4a05ec932ed5eee2e0))
* **platform:** change client timeout to 30s ([665934b](https://github.com/tkestack/tke/commit/665934b927349571d0505334c4726640ff1517f2))
* **prometheus:** fix k8s 1.16 cannot install prometheus ([cc357e7](https://github.com/tkestack/tke/commit/cc357e78c1d9e542f2d22070d1a7aca597a87670))
* business manage pod remove problem ([118de91](https://github.com/tkestack/tke/commit/118de9182dbdeb13736c77b3ce0ca718ab5bfab9))
* business manage, business & namespace switch linkage problem ([ba0433f](https://github.com/tkestack/tke/commit/ba0433f4ddda972d4ad21fcff8f754c91e8ee637))
* bussiness namespace ([19a108f](https://github.com/tkestack/tke/commit/19a108f4432969f797b0d37e53958dff226a3cba))
* fix overview ([f3265cd](https://github.com/tkestack/tke/commit/f3265cd2b985cf45e767b86c9c738f22b5d8333d))
* the description of the strategy is incomplete ([00f18b5](https://github.com/tkestack/tke/commit/00f18b5598e23bf2896dea59951b9d4150998a6d))
* **installer:** lint ([324ce71](https://github.com/tkestack/tke/commit/324ce71111a0080a99c7ec84d2213510be615405))
* **installer:** modify tke-monitor-api configuration ([878a7f7](https://github.com/tkestack/tke/commit/878a7f731ec864065a9b59b9725cff9f78b62f01))
* **installer:** restart error when missing PlatformAPIClientConfig ([c6a76a1](https://github.com/tkestack/tke/commit/c6a76a1b2bcc639c6e9f75a9f01df72fad938e82))
* **installer:** support wildcard cert ([8830c85](https://github.com/tkestack/tke/commit/8830c8509cb0b07f80a643d636e81bae03560fe7))
* **installer:** use standard function to parse docker image name ([fa260c4](https://github.com/tkestack/tke/commit/fa260c47f0f8fb85e7cf558477a5a4139458c85c))
* **installer:** use vip first as host server ([0737c08](https://github.com/tkestack/tke/commit/0737c08505b0499bbb67728c247b7f87b177db8f))
* **monitor:** fix metric conflict in monitor prometheus controller ([aac8bdf](https://github.com/tkestack/tke/commit/aac8bdf764b8c0eeaf5e2404fa49a8901bccee43))
* **monitor:** use prometheus client instead of k8s legacyregistry ([04b881d](https://github.com/tkestack/tke/commit/04b881d43b8ee0bcdce23594e4513a48e9e2d3e5))
* **notify:** fix wrong notifyAddress stored in tke-notify-api cm ([fd1858b](https://github.com/tkestack/tke/commit/fd1858b967c94aaceeae0819c75e86ede86737c8))
* **platform:** add path in host url if address.Path is set ([8c2358b](https://github.com/tkestack/tke/commit/8c2358b47bfee5884052f2b4fab66c758e301d81))
* **platform:** support create APIService in apiclient ([54379c9](https://github.com/tkestack/tke/commit/54379c95ea8048a99538b64c2bc216eaffbc33be))
* **prometheus:** add metric prometheus_status_fail to expose status ([ef0b669](https://github.com/tkestack/tke/commit/ef0b6698acabac52c1779ecb8fe2d32f247d5118))
* **prometheus:** fix wrong label name of metric prometheus_status_fail ([1172753](https://github.com/tkestack/tke/commit/11727533e40e1c2314ec388a72cce989bbf6fdc4))
* **promethues:** fix that deploy prometheus on k8s before 1.17 fails ([bcd3d0a](https://github.com/tkestack/tke/commit/bcd3d0a598bb15e91a0c74f6128af7faed2df891))


### Features

* **auth:** adapt platform policies and business policies ([1b39f9d](https://github.com/tkestack/tke/commit/1b39f9d9dd9cfb11158eecf714935d4c438a8b30))
* **auth:** policies without users are prohibited from generating rules ([ca06b82](https://github.com/tkestack/tke/commit/ca06b82fd248768fccd82f0cd971e95b0438ea6a))
* **auth:** update domain role manager ([b022984](https://github.com/tkestack/tke/commit/b0229845aa09b8c2f9dcd8aa69099cf418031a5d))
* **cluster:** add authz webhook if business enabled ([1586def](https://github.com/tkestack/tke/commit/1586defd86bf8be86c8700e4def67976a2664984))
* **cluster:** auto add authz webhook when open audit ([f890511](https://github.com/tkestack/tke/commit/f8905119ac81e1ceca2a99350d14b34ebb306dc9))
* **monitor:** support cluster overview display usage ([e977604](https://github.com/tkestack/tke/commit/e977604573ab49863ae27bdddccbe1225f001ea7))
* **monitor:** support for querying clusters' overview data ([7603f65](https://github.com/tkestack/tke/commit/7603f65d031d840378b89d3ba39448c0cec5cd4c))
* **platform:** bump up tapp controller version to v1.1.0 ([79c4200](https://github.com/tkestack/tke/commit/79c420014963f9d747d73bad87933800ab13dc56))
* **prometheus:** add label prometheus_name to prometheus_status_fail ([92a7721](https://github.com/tkestack/tke/commit/92a77219468302bd796922f4c2036e03190b6296))
* **prometheus:** add metric kube_node_spec_taint ([3c1773d](https://github.com/tkestack/tke/commit/3c1773db35820302e46e69c2a945ddc2bba6bf6f))
* **prometheus:** add more metrics to prometheus ([f67d34d](https://github.com/tkestack/tke/commit/f67d34db3195b0a239e5c4d411dc1662652222e3))
* **prometheus:** update prometheus metrics ([428fb70](https://github.com/tkestack/tke/commit/428fb70cd9100825fa44474691af3c0f5921ae75))
* support selector of daemon & tapp when creating service ([7ce9e08](https://github.com/tkestack/tke/commit/7ce9e089129f33d58d4586a944df5b743758db14))
* **gateway:** asset routing supports header request ([54b91c5](https://github.com/tkestack/tke/commit/54b91c553976dc81c113ababb18f248664e2e215))
* **platform:** add metrics-server to cluster feature ([5bf1a39](https://github.com/tkestack/tke/commit/5bf1a39de733bee97dfc0d061f39ecfad337347b))
* **prometheus:** add more metrics scraped by prometheus ([cbb630d](https://github.com/tkestack/tke/commit/cbb630d459eb94b419e6f0e4f3a2ab782cb05b55))
* support overview ([88cddeb](https://github.com/tkestack/tke/commit/88cddebf0c4afedd0b83422223dbf11bec2d7d6a))
* **prometheus:** add node-problem-detector to prometheus addon ([af967de](https://github.com/tkestack/tke/commit/af967deef6a0ee82d6c052f90bef31dd01c5a8c6))
* **prometheus:** delete prometheus_status_fail along with prometheus ([790f8d9](https://github.com/tkestack/tke/commit/790f8d93f2b78cb4903dba5cca7f7f53655bb245))


