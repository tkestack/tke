
# [1.4.0](https://github.com/tkestack/tke/compare/v1.3.1...v1.4.0) (2020-09-28)


### Bug Fixes

* **application:** add special namespace args ([0bb4fdd](https://github.com/tkestack/tke/commit/0bb4fdd41ec6984595c7ca32abf6e678253dce64))
* **application:** decode application rawvalues ([dfba17f](https://github.com/tkestack/tke/commit/dfba17f029ef9d76776c96d6cd2b2857c7d3851c))
* **application:** disuse projectid cookie if no need ([6fa5a50](https://github.com/tkestack/tke/commit/6fa5a50219d81efa1672edf6e42db7c8a795c169))
* **application:** encode application rawvalues ([55a706a](https://github.com/tkestack/tke/commit/55a706a89c57816fdbffd4f995ba6afcdc0ca023))
* **application:** js format ([1d237d5](https://github.com/tkestack/tke/commit/1d237d5b48ef466e16055905219f86ecefb90341))
* **application:** project view menu ([8a88889](https://github.com/tkestack/tke/commit/8a888897a5e9df9c46bafc1a3c0d39b94227968e))
* **application:** registry is unrequired ([08ee7ef](https://github.com/tkestack/tke/commit/08ee7ef245535d6c8d1f7255b542dcf35d422914))
* **application:** send project name header in platform view ([eaa7561](https://github.com/tkestack/tke/commit/eaa7561d53dab5cd4026095aceac944cb1820bf7))
* **application:** support update dryrun ([c800fb2](https://github.com/tkestack/tke/commit/c800fb2921f7ae22126d92b4132304242630c262))
* **application:** update project name judge ([3024a1e](https://github.com/tkestack/tke/commit/3024a1e197e201afae171dddae98bee29c96b0b0))
* **auth:** do not limit field number of g type rules when querying ([b0a0e46](https://github.com/tkestack/tke/commit/b0a0e4690a77aafbe23b16760a891c89556c90ee))
* **auth:** fix invalid number of tokens when empty strings appear ([2863056](https://github.com/tkestack/tke/commit/2863056a73a892a283c3d08edae6d2ad3df849ce))
* **cluster:** fix cronhpa bug ([d226bbe](https://github.com/tkestack/tke/commit/d226bbe9760253d0ab7775c924a919698f7a048c))
* **cluster:** ingress apigroup replacement problem ([784b5b6](https://github.com/tkestack/tke/commit/784b5b66a9e89221fcf6e460616054d29bfdac72))
* **cluster:** update kubelet version compare ([e12f2d3](https://github.com/tkestack/tke/commit/e12f2d3ca4527506621940ff3bd6c4c009415bd4))
* **cluster:** vip dnat to k8s-svc-ip before kube-proxy running ([70932f9](https://github.com/tkestack/tke/commit/70932f981ac8ba11f8d43198161dbe8752cd2ac7))
* **cluster:** yaml split error ([2ae5ef1](https://github.com/tkestack/tke/commit/2ae5ef1eb0848d13d062b2aa0614e24b770dad32))
* **console:**  support another namesapce group ([78cffd6](https://github.com/tkestack/tke/commit/78cffd6dbb197c0947881f6304f3a88577078928))
* **console:**  修复创建集群时k8s版本未选择也能创建的bug ([7e8b10a](https://github.com/tkestack/tke/commit/7e8b10a6e3156a77ed8281b723f96b802fb71396))
* **console:** fix  corhpa page error ([e019a96](https://github.com/tkestack/tke/commit/e019a965a9cbdd83cade94040943652ab3c2ef11))
* **console:** fix CI can't pick up installer web commit ([#731](https://github.com/tkestack/tke/issues/731)) ([4acf086](https://github.com/tkestack/tke/commit/4acf0869fff07824b177407bcbd5c1a1f625e07c))
* **console:** fix project meterice request header error ([#764](https://github.com/tkestack/tke/issues/764)) ([903aa89](https://github.com/tkestack/tke/commit/903aa89acd5df8bdfc2e863cbe792640b718b640))
* **console:** fix some api request error ([c825ab3](https://github.com/tkestack/tke/commit/c825ab3b5c2f79271cbfbd66d152635dbbb880ab))
* **console:** hpa.tsx type error ([8aa4758](https://github.com/tkestack/tke/commit/8aa4758698391229d2291b3be34518f1b72ff2e4))
* **console:** iat overview page add cluster display name and fix the use rate bug ([480924d](https://github.com/tkestack/tke/commit/480924d24799c4e98ee555974609f725d715247c))
* **console:** kebeconfig error ([935aef7](https://github.com/tkestack/tke/commit/935aef74147bfd5f8d2943019066aaaf30f69308))
* **console:** peoject platform alarm promethuses  support monitor ([2749bb2](https://github.com/tkestack/tke/commit/2749bb2763f2e83cf62bcf35e1f098e941360a59))
* **console:** remove console ([64b357a](https://github.com/tkestack/tke/commit/64b357a902e59d7358babe414f8c82593de041b3))
* **console:** remove unuse import ([8eb2757](https://github.com/tkestack/tke/commit/8eb2757a0a4a3144bd9331fe2a6023c12a16f123))
* **console:** send projectid when request app list ([edef197](https://github.com/tkestack/tke/commit/edef1973dcabb688246094994b093153e6f6c5a3))
* **console:** support dryrun ([d9526c3](https://github.com/tkestack/tke/commit/d9526c3b6d2d4a8e2dd0ebb3a789dd6f80f74607))
* **console:** update chart upload guide ([#747](https://github.com/tkestack/tke/issues/747)) ([70eb8b6](https://github.com/tkestack/tke/commit/70eb8b6134549a7dddb953a91bbfa6a70798e2a0))
* **console:** 修复以下小问题： ([73789b4](https://github.com/tkestack/tke/commit/73789b4148d07a2093e1a720ecbe0484a91df7ab))
* **console:** 日志采集页面空白报错 ([f7a9e8e](https://github.com/tkestack/tke/commit/f7a9e8e838dc74ea83c72e2d491952cddbc7bcff))
* **console:** 更换kubectl安装指引地址 ([03ad08d](https://github.com/tkestack/tke/commit/03ad08deb10228e07b6c5abb73793a7d7c477141))
* **console:** 添加平台判断，修复平台管理中的namespace下拉框显示错误 ([2d7c8b6](https://github.com/tkestack/tke/commit/2d7c8b637377b215e7b2a22bc0d1572e8b683fcd))
* **console:** 监控图表异常显示错误 ([067166b](https://github.com/tkestack/tke/commit/067166b7bdc8e00575c323f98f13aaf144d9db63))
* **docker:** add component docker file ([01f5692](https://github.com/tkestack/tke/commit/01f5692e9f27bf5cb3355432a86316078062f9a9))
* **docs:** add limitaion to api trunking ([#683](https://github.com/tkestack/tke/issues/683)) ([58fd4a4](https://github.com/tkestack/tke/commit/58fd4a4d9bd092647c0f562206cd80f3ebd9963c))
* **docs:** add new limitation to api trunking ([187112a](https://github.com/tkestack/tke/commit/187112a2e15159fb05745959a0c5d6cb7a64fc6c))
* **galaxy:** update galaxy version ([f3e427b](https://github.com/tkestack/tke/commit/f3e427bda42227eae7fb187a1f1710d71330d7a7))
* **gateway:** webtty add project header ([#654](https://github.com/tkestack/tke/issues/654)) ([9927d4b](https://github.com/tkestack/tke/commit/9927d4b19f8e436406009d8e9e2d9c6597f52187))
* **install:** allowed username and passworld empty ([6f455f3](https://github.com/tkestack/tke/commit/6f455f32ca0e78589f0ffcd24e86ef26b6dd2da5))
* **install:** fix gputype overwrite enableMetricsServer ([bd7c237](https://github.com/tkestack/tke/commit/bd7c237413c255aea7fb8120afed2f15a3d418b6))
* **install:** fix HA config for master host list failed on UI validation ([16c9cdf](https://github.com/tkestack/tke/commit/16c9cdf2dc4b9814689a12882facd085ff4ea175))
* **install:** when switch repoType ,set application to false ([20d5e75](https://github.com/tkestack/tke/commit/20d5e75f25e68476a532ce084c9b8b5b23ac3280))
* **installer:** access nodeport cause 63s delay ([#710](https://github.com/tkestack/tke/issues/710)) ([6233a91](https://github.com/tkestack/tke/commit/6233a916ff6f526ef9c8fd0b2c27f55e75033982))
* **installer:** access nodeport cause 63s delay ([#715](https://github.com/tkestack/tke/issues/715)) ([8210fcc](https://github.com/tkestack/tke/commit/8210fccf9307ec845e78414145957b3524c7fbc3))
* **installer:** access nodeport cause 63s delay ([#717](https://github.com/tkestack/tke/issues/717)) ([8a10da3](https://github.com/tkestack/tke/commit/8a10da358d6c08ae95dd33394aa44223b78569d0))
* **installer:** add replicas in application and registry ([6a64b3a](https://github.com/tkestack/tke/commit/6a64b3a5624f16f08fb782a422ab2a4a6ab1f58f))
* **installer:** adjust EnsureDisableOffloading order ([#721](https://github.com/tkestack/tke/issues/721)) ([7dd0721](https://github.com/tkestack/tke/commit/7dd0721a49ba027e679889fcd119f139c8329fb4))
* **installer:** application api component add repo conf ([4c9dbe5](https://github.com/tkestack/tke/commit/4c9dbe59762578ce179a2df0b467cf0341c988bb))
* **installer:** apply configmap ignore resourceVersion ([be89118](https://github.com/tkestack/tke/commit/be8911805c66f06100f986becd2c3c46655314fe))
* **installer:** choose to install application ([3aeb0d7](https://github.com/tkestack/tke/commit/3aeb0d7f019d69bf5c9d31334c18eae790b9a968))
* **installer:** enable-nvidia-device ([#676](https://github.com/tkestack/tke/issues/676)) ([1d4dcf8](https://github.com/tkestack/tke/commit/1d4dcf8e359c430492a7ebb12cfc7afa881cf21e))
* **installer:** increase-resource ([#644](https://github.com/tkestack/tke/issues/644)) ([bd95ba7](https://github.com/tkestack/tke/commit/bd95ba71eaacca86daf9b396cc3d51e412fe8a7d)), closes [#579](https://github.com/tkestack/tke/issues/579)
* **installer:** miss sysctl.conf ([1e99ba3](https://github.com/tkestack/tke/commit/1e99ba3042c3404410f156228e4194f596c6e42f))
* **installer:** modify enablebusiness ([03da2b4](https://github.com/tkestack/tke/commit/03da2b4b2f8475dca544725cf78fd95424ad50a7))
* **installer:** modify features repo ([9cc4d35](https://github.com/tkestack/tke/commit/9cc4d359c3947111b95cc312b25c1bf5b7475e7e))
* **installer:** skip docker login when no username ([515bcc6](https://github.com/tkestack/tke/commit/515bcc629e68a162812f0e03a0e5d3a8971a083b))
* **lint:** golangci lint ([16d74ca](https://github.com/tkestack/tke/commit/16d74ca50e7e6803e066748fff1715a03a634b6b))
* **lint:** make lint error ([591775b](https://github.com/tkestack/tke/commit/591775b813932d93a90afd11d3b78d32e6833135))
* **logagent:** use get to download log file ([d7b2b86](https://github.com/tkestack/tke/commit/d7b2b86cec6d2d88e00849df14f5d5f99047cece))
* **monitor:** decide to reload based on whether clusters are running ([402ff1f](https://github.com/tkestack/tke/commit/402ff1fd6ca53c6338fe75bc492826ab5a272557))
* **monitor:** set thanos query timeout to 60s ([bc09005](https://github.com/tkestack/tke/commit/bc090059f77da49ef2ae6b0dfb33818e5f0ecc6c))
* **notify:** make value summary more readable ([3ffe13d](https://github.com/tkestack/tke/commit/3ffe13da3056b952786669b8d880d9e285e58e42))
* **platform:** add master toleration for metrics-server ([47ab08f](https://github.com/tkestack/tke/commit/47ab08f9257446990fd8e6bf8639be56c904728c))
* **platform:** add nodeAffinity to bind metrics-server to master ([69c14ef](https://github.com/tkestack/tke/commit/69c14ef9ccbd405150bcafdc73c1b10e6fdadce8))
* **platform:** implement deployment rollback for 1.16+ cluster ([45ddc20](https://github.com/tkestack/tke/commit/45ddc20ca163b51bfa1e046d3314e9c3c89ee54a))
* **platform:** update cm from file ([b49eee6](https://github.com/tkestack/tke/commit/b49eee61f5a11e6d52174ace2b31e6a2b2e66d3a))
* **platform,monitor:** add missing labels for kubelet metrics ([becb7b6](https://github.com/tkestack/tke/commit/becb7b6c2ce2ba455000c96eaebfa3a27419cd92))
* **platform,monitor:** fix scheduler latency metric for k8s 1.18 ([d326f5f](https://github.com/tkestack/tke/commit/d326f5fe92c88bc87429581dd94ba44ce3abbc44))
* **registry:** add chart version policy ([74fddf3](https://github.com/tkestack/tke/commit/74fddf383435faa01537c6f5db9691af4f75acff))
* **registry:** chartgroup and chart list in the same page ([f714b99](https://github.com/tkestack/tke/commit/f714b99c92763d0c1f2c757787fb598a043f0619))
* **registry:** disuse projectid cookie if no need ([8c5e415](https://github.com/tkestack/tke/commit/8c5e415aa9be88cd862e290890fb6e1c2ceb4c13))
* **registry:** exclude dependencies of auth and business component ([6e43fbe](https://github.com/tkestack/tke/commit/6e43fbec5012f7d3f23c34c668dca1fc521dc4dc))
* **registry:** fix go lint ([24714a1](https://github.com/tkestack/tke/commit/24714a135a776b5766166f513fb9b93abdda6cf2))
* **registry:** modify chart version restapi ([71c0ccc](https://github.com/tkestack/tke/commit/71c0ccc6c127aa59c638fb9d5eb30efb81296d62))
* **registry:** modify chart version restapi ([15897f6](https://github.com/tkestack/tke/commit/15897f62f4680c6d2bacc079ffedbfbabbf24eb6))
* **registry:** modify registry base url ([cb102f4](https://github.com/tkestack/tke/commit/cb102f461300a61e71da91075f69e3e80861e024))
* **registry:** multitenant registry domain ([6aee3e2](https://github.com/tkestack/tke/commit/6aee3e2469b5b91cea198a7fced369e3b624c256))
* **registry:** registry url sub ([380e873](https://github.com/tkestack/tke/commit/380e87371c0a2496398345892bebce447d757a22))
* **registry:** send fuzzy resource name if need ([cc5253f](https://github.com/tkestack/tke/commit/cc5253ffcf5a6d2875fa0d9953492120ef4f0189))
* **registry:** support default chartgroup ([2e00cf7](https://github.com/tkestack/tke/commit/2e00cf7eb02eacf37fbce172637633f2a152e0cf))
* **registry:** update chart project args ([3e853a0](https://github.com/tkestack/tke/commit/3e853a04ebabbeea6d19b2c26979568ac4c15f11))
* **registry:** update dependence version to fix a crash bug ([f3575ea](https://github.com/tkestack/tke/commit/f3575eaf83cd0568710dbfabefafacc916dfb293))
* 修复当cluster版本大于等于1.14时deployment回滚失败 ([8a89ece](https://github.com/tkestack/tke/commit/8a89ece037e7413d43354ef404866b859f497a33))


### Features

* **application:** support chart and helm ([36dfd40](https://github.com/tkestack/tke/commit/36dfd405de4457145790e2cce7f0225fd0275f25))
* **application:** support chart and helm application ([6fbf4a1](https://github.com/tkestack/tke/commit/6fbf4a1d96a7cde16ef0220ddfc6dd02de3333e8))
* **application:** support dryrun ([883d4c4](https://github.com/tkestack/tke/commit/883d4c4f4c7a39d291c9b2d55aeb1512820b9fb5))
* **cluster:** add hpa and cronhpa ([1bfca7f](https://github.com/tkestack/tke/commit/1bfca7f1aefdeee0f2cc7ab96535d17306b1a6f1))
* **cluster:** installer support content resource ([00225ef](https://github.com/tkestack/tke/commit/00225ef19048aa14ab3e9e127d5f8b5db457b69b))
* **cluster:** provider can use lister to list clusters ([c706d8d](https://github.com/tkestack/tke/commit/c706d8d86205351a84ce6b1cec133d45a35a6001))
* **cluster:** rm lb bcs it doesn't work well in some case ([8a552f6](https://github.com/tkestack/tke/commit/8a552f6687d0e6131d6f0e89dffbe72424bdea3c))
* **console:**  can enable prometheus in cluster base info page ([#759](https://github.com/tkestack/tke/issues/759)) ([df1282e](https://github.com/tkestack/tke/commit/df1282eaaf4fc3e7bcf0b1d6eccea924124f83f3))
* **console:** add kubeconfig & guide ([360fc4e](https://github.com/tkestack/tke/commit/360fc4e23fb40f572d7d7daf4e586f7ac0e11e47))
* **console:** project console namespace select support groups ([3f46a10](https://github.com/tkestack/tke/commit/3f46a105839c0dd2d0abb8e28e4db9063f9372ba))
* **console:** show chart icon and readme ([c45ef42](https://github.com/tkestack/tke/commit/c45ef424243300198f6594ad4e6041d015fa688b))
* **console:** support enable metrics server ([a08571e](https://github.com/tkestack/tke/commit/a08571ebe70ff3cf25c64df248392d9d2e873fb8))
* **console:** support helm dryrun ([012bda0](https://github.com/tkestack/tke/commit/012bda00f7465ea152b592d2439608d8cfa29f1e))
* **console:** support helm history manifest ([#756](https://github.com/tkestack/tke/issues/756)) ([0ad32bf](https://github.com/tkestack/tke/commit/0ad32bf39727199ecbfe1358ac0e1736e9fd2013))
* **gateway:** support component openapi overview ([a490cb2](https://github.com/tkestack/tke/commit/a490cb22e2b8f3300354367baf7a440aa2a901ad))
* **install:** support enable application ([86318de](https://github.com/tkestack/tke/commit/86318de3d319fdec15a25b32923bfa135e6015f5))
* **installer:** complete registry and application component ([e0f2578](https://github.com/tkestack/tke/commit/e0f25784c8e30f7a02efe355f0ccd98bc04b267c))
* **installer:** generate image list for specified archs ([b730ab4](https://github.com/tkestack/tke/commit/b730ab45d510957e6396b372337e69d5591c951b))
* **monitor:** add client in monitor client interface ([81e70c9](https://github.com/tkestack/tke/commit/81e70c91c12d0e4f18545f3d7516d6386b697287))
* **monitor:** add cluster display name in overview interface ([047aa28](https://github.com/tkestack/tke/commit/047aa28e0f343c7988532c7c119f96da4407b3bd))
* **monitor:** add tenant id in overview response ([68ed840](https://github.com/tkestack/tke/commit/68ed840a2f655231867213681caccb4514ca5124))
* **monitor:** add total CPU and memory to the overview interface ([0686946](https://github.com/tkestack/tke/commit/068694616c0845191b2e98c5586ee34f9586e926))
* **monitor:** decouple monitor and business ([0ff8557](https://github.com/tkestack/tke/commit/0ff8557376d0543ee31357fd0e474381f7fba9ac))
* **platform:** add flag enableMetricsServer for cluster feature ([eae6810](https://github.com/tkestack/tke/commit/eae6810772472c632cb3b12d2f83577444d700f8))
* **platform:** add machineIP to old nodes ([4d21224](https://github.com/tkestack/tke/commit/4d212248d55db454515dd32e06d96f50eb5c9737))
* **platform:** allow cluster to set hostname as nodename ([5dcd1c2](https://github.com/tkestack/tke/commit/5dcd1c2a662bf625e3b5b9b035e0e4c822d94b26))
* **platform:** bump up tapp controller version to v1.1.1 ([18d06a6](https://github.com/tkestack/tke/commit/18d06a69f2acae4d26751351881a7c5b05b9d554))
* **platform:** set nodename for stateful components ([20df2ed](https://github.com/tkestack/tke/commit/20df2ed6904fa28afa7fb7c83c5f666976ad5630))
* **platform,monitor:** add metric k8s_node_not_ready ([eb71786](https://github.com/tkestack/tke/commit/eb717867ab0fbab0d37db0311619495d1d6725f4))
* **prometheus:** add metrics for controller-manager and coredns ([1ae16fa](https://github.com/tkestack/tke/commit/1ae16faa2e32def5ed158323805101f2a3a42e9f))
* **prometheus:** add more etcd metrics ([17dc9f9](https://github.com/tkestack/tke/commit/17dc9f9ee92645122de163fdc7b65489e839bac2))
* **prometheus:** add more info to logs of prometheus install ([df92a5c](https://github.com/tkestack/tke/commit/df92a5c41f9f5fc769c31efd9ed6162ed1850419))
* **registry:** add registry's domain names to coredns by tenant ([bb5e076](https://github.com/tkestack/tke/commit/bb5e076fd239befc7108b96a9e497aefd3d2c32c))
* **registry:** enable delete image by digest ([e18a50d](https://github.com/tkestack/tke/commit/e18a50d1875d913823738125c44dca473371a605))
* installer fix bug ([34a9ea2](https://github.com/tkestack/tke/commit/34a9ea285e2b1916f1e64cbcb47ae351df3f109d))


### Reverts

* Revert "build(policy.json): add action of createpodexec to viewer (#651)" (#732) ([771c927](https://github.com/tkestack/tke/commit/771c927286d85c8213f319a8b54e529d280808bb)), closes [#651](https://github.com/tkestack/tke/issues/651) [#732](https://github.com/tkestack/tke/issues/732)

